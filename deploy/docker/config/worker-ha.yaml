# Worker Configuration - High Availability Mode
# Uses Redis Sentinel for shared L2 cache

server:
  listen_address: "0.0.0.0:53"
  num_workers: 4
  enable_tcp: true

cache:
  mode: hybrid
  message_cache:
    max_size_mb: 64
    num_shards: 32
  rrset_cache:
    max_size_mb: 128
    num_shards: 64
  shared_cache:
    enabled: true
    type: redis-sentinel
    sentinel:
      master_name: "${REDIS_SENTINEL_MASTER:-dns-cache}"
      addresses: "${REDIS_SENTINEL_ADDRESSES}"
    database: 0
    key_prefix: "dns:"
    ttl_multiplier: 1.5
    pool_size: 10
    min_idle_conns: 5
    read_preference: replicaPreferred
  prefetch:
    enabled: true
    threshold_hits: 100

worker:
  control_plane_address: "${CONTROL_PLANE_ADDRESS}"
  heartbeat_interval: 10s
  reconnect_delay: 5s

logging:
  level: info
  format: json
